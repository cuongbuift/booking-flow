import{B as M}from"./BookingSteps-B0wTCxmh.js";import{d as y,c as v,o as d,a as o,t as s,n as N,u as n,_ as x,r as b,e as j,p as q,q as H,g as P,h as V,F as R,s as G,w as W,k as F,v as U,l as L,m as A,b as B}from"./index-aaG0zd5z.js";import{b as K,d as E,a as O}from"./index-Bi4aKoGD.js";import{u as Y}from"./bookingStore-qzd-p-H8.js";import{r as z}from"./restService-ClNlqljE.js";const J={class:"room-item"},Q={class:"img-block"},X=["src","alt"],Z={class:"room-info"},oo={class:"room-title"},to={class:"desc"},so={class:"book-room-block"},eo={class:"price"},no=y({__name:"Room",props:{room:{}},emits:["selectRoom"],setup(f,{emit:e}){const t=f,u=e,m=()=>{u("selectRoom",t.room)};return(a,l)=>{var p,_,i,g,w,k;return d(),v("div",J,[o("div",Q,[o("img",{src:(p=t.room)==null?void 0:p.image,alt:(_=t.room)==null?void 0:_.title,class:"room-thumbnail"},null,8,X)]),o("div",Z,[o("h4",oo,s((i=t.room)==null?void 0:i.title),1),o("h6",null,s((g=t.room)==null?void 0:g.description),1),o("p",to,s((w=t.room)==null?void 0:w.content),1)]),o("div",so,[o("p",eo,[o("span",null,s(n(K)((k=t.room)==null?void 0:k.price)),1),l[0]||(l[0]=N("/night "))]),l[1]||(l[1]=o("p",null,"Subject to GST and charges",-1)),o("button",{type:"button",class:"btn-common",onClick:m},"BOOK ROOM")])])}}}),ro=x(no,[["__scopeId","data-v-fc9ea2d2"]]),ao=f=>new Promise(e=>{z.get("/rooms").then(t=>{const u=t.data;u.sort((m,a)=>f==="asc"?m.price-a.price:a.price-m.price),e(u)})}),co={class:"search-selected-info"},lo={class:"search-selected-dates"},io={class:"search-selected-guests"},uo={key:0},mo={class:"sort-by"},po={class:"dropdown"},_o={class:"dropdown-text"},ho={class:"dropdown-menu"},vo=["onClick"],fo=y({__name:"ListingRoom",setup(f){const e=b(!1),t=b("LOWEST PRICE"),u=["LOWEST PRICE","HIGHEST PRICE"],m=j(),a=q(),l=b([]),p=a.query.fromDate,_=a.query.toDate,i=a.query.children,g=a.query.adults,w=E(_).diff(E(p),"day"),k=Y();H(t,async c=>{await S(),console.log(c)});const D=()=>{e.value=!e.value},$=()=>{e.value=!1},I=c=>{t.value=c,e.value=!1},T=c=>{k.selectRoom(c,p,_,+g,+i),m.push("/contact-details")},S=async()=>{l.value=[...await ao(t.value==="LOWEST PRICE"?"asc":"desc")]};P(async()=>{S(),document.addEventListener("click",C)});function C(c){c.target.closest(".dropdown")||$()}return V(()=>{document.removeEventListener("click",C)}),(c,r)=>(d(),v(R,null,[o("div",co,[o("div",lo,[o("span",null,s(n(O)(n(p))),1),r[0]||(r[0]=o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"black",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M2 12H20L14 6M20 12L14 18",stroke:"black","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),o("span",null,s(n(O)(n(_))),1)]),o("div",io,[o("span",null,s(n(w))+" NIGHT",1),r[1]||(r[1]=o("span",null,"|",-1)),o("span",null,s(n(g))+" ADULT(S)",1),n(i)&&n(i)!=="0"?(d(),v("span",uo,"- "+s(n(i))+" CHILDREN",1)):G("",!0)])]),o("div",mo,[r[3]||(r[3]=o("span",null,"SORT BY:",-1)),o("div",po,[o("button",{class:"dropdown-btn",onClick:F(D,["stop"])},[o("span",_o,s(t.value),1),r[2]||(r[2]=o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),W(o("div",ho,[(d(),v(R,null,L(u,h=>o("a",{class:"dropdown-item",href:"javascript:",key:h,onClick:wo=>I(h)},s(h),9,vo)),64))],512),[[U,e.value]])])]),o("div",null,[(d(!0),v(R,null,L(l.value,h=>(d(),A(ro,{key:h.title,room:h,onSelectRoom:T},null,8,["room"]))),128))])],64))}}),go=x(fo,[["__scopeId","data-v-43f0d0b3"]]),Co=y({__name:"ListingRoomView",setup(f){return(e,t)=>(d(),v(R,null,[B(M,{step:2}),B(go)],64))}});export{Co as default};
